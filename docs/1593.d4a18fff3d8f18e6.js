"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1593],{1593:(fe,N,E)=>{E.r(N),E.d(N,{FormPage:()=>Sn});var b=E(467),L=E(177),C=E(4341),F=E(4613),_=E(4742),x=E(224),k=E(1109),O=E(8313),h=E(3953);function w(e){const{anchorOffset:n=0,focusOffset:r=0}=e.ownerDocument.getSelection()||{};return[Math.min(n,r),Math.max(n,r)]}class pe{constructor(n){this.element=n,this.maxLength=1/0}get value(){return this.element.innerText.replace(/\n\n$/,"\n")}set value(n){this.element.innerHTML=n.replace(/\n$/,"\n\n")}get selectionStart(){return w(this.element)[0]}get selectionEnd(){return w(this.element)[1]}setSelectionRange(n,r){!function ne(e,[n,r]){var t,s;const o=e.ownerDocument,i=o.createRange();i.setStart(e.firstChild||e,Math.min(n,(null===(t=e.textContent)||void 0===t?void 0:t.length)||0)),i.setEnd(e.lastChild||e,Math.min(r,(null===(s=e.textContent)||void 0===s?void 0:s.length)||0));const a=o.getSelection();a&&(a.removeAllRanges(),a.addRange(i))}(this.element,[n||0,r||0])}select(){this.setSelectionRange(0,this.value.length)}}const A=e=>e.isContentEditable?function S(e){const n=new pe(e);return new Proxy(e,{get(r,t){if(t in n)return n[t];const s=r[t];return"function"==typeof s?s.bind(r):s},set:(r,t,s,o)=>Reflect.set(t in n?n:r,t,s,o)})}(e):e.querySelector("input,textarea")||e,V={mask:/^.*$/,preprocessors:[],postprocessors:[],plugins:[],overwriteMode:"shift"};class me{constructor(){this.now=null,this.past=[],this.future=[]}undo(){const n=this.past.pop();n&&this.now&&(this.future.push(this.now),this.updateElement(n,"historyUndo"))}redo(){const n=this.future.pop();n&&this.now&&(this.past.push(this.now),this.updateElement(n,"historyRedo"))}updateHistory(n){if(!this.now)return void(this.now=n);const r=this.now.value!==n.value,t=this.now.selection.some((s,o)=>s!==n.selection[o]);!r&&!t||(r&&(this.past.push(this.now),this.future=[]),this.now=n)}updateElement(n,r){this.now=n,this.updateElementState(n,{inputType:r,data:null})}}function se(e){return"string"==typeof e}function ke(e,n,r,t){let s="";for(let o=n.length;o<e.length;o++){const i=e[o]||"",a=(null==t?void 0:t.value[o])===i;if(!se(i)||i===r&&!a)return s;s+=i}return s}function we(e,n){return Array.isArray(n)?e.length===n.length&&Array.from(e).every((r,t)=>{const s=n[t]||"";return se(s)?r===s:r.match(s)}):n.test(e)}function re(e,n,r=null){if(we(e.value,n))return e;const{value:t,selection:s}=Array.isArray(n)?function lt(e,n,r){let t=null,s=null;const o=Array.from(e.value).reduce((a,c,l)=>{const d=a+ke(n,a,c,r),g=n[d.length]||"";return se(g)?d+g:c.match(g)?(null===t&&l>=e.selection[0]&&(t=d.length),null===s&&l>=e.selection[1]&&(s=d.length),d+c):d},""),i=ke(n,o,"",r);return{value:we(o+i,n)?o+i:o,selection:[null!=t?t:o.length,null!=s?s:o.length]}}(e,n,r):function ut({value:e,selection:n},r){const[t,s]=n;let o=t,i=s;return{value:Array.from(e).reduce((c,l,u)=>{const d=c+l;return t===u&&(o=c.length),s===u&&(i=c.length),d.match(r)?d:c},""),selection:[o,i]}}(e,n);return{selection:s,value:Array.isArray(n)?t.slice(0,n.length):t}}function Ie(e,n){if(!Array.isArray(n))return e;const[r,t]=e.selection,s=[],o=Array.from(e.value).reduce((i,a,c)=>{const l=n[c]||"";return c===r&&s.push(i.length),c===t&&s.push(i.length),se(l)&&l===a?i:i+a},"");return s.length<2&&s.push(...new Array(2-s.length).fill(o.length)),{value:o,selection:[s[0],s[1]]}}class ve{constructor(n,r){this.initialElementState=n,this.maskOptions=r,this.value="",this.selection=[0,0];const{value:t,selection:s}=re(this.initialElementState,this.getMaskExpression(this.initialElementState));this.value=t,this.selection=s}addCharacters([n,r],t){const{value:s,maskOptions:o}=this,i=this.getMaskExpression({value:s.slice(0,n)+t+s.slice(r),selection:[n+t.length,n+t.length]}),a={value:s,selection:[n,r]},c=Ie(a,i),[l,u]=function at({value:e,selection:n},r,t){const[s,o]=n;return{value:e,selection:"replace"===("function"==typeof t?t({value:e,selection:n}):t)?[s,s+r.length]:[s,o]}}(c,t,o.overwriteMode).selection,d=c.value.slice(0,l)+t,g=d.length,f=re({value:d+c.value.slice(u),selection:[g,g]},i,a);if(s.slice(0,l)===re({value:d,selection:[g,g]},i,a).value||function Re(e,...n){return n.every(({value:r,selection:t})=>r===e.value&&t[0]===e.selection[0]&&t[1]===e.selection[1])}(this,f))throw new Error("Invalid mask value");this.value=f.value,this.selection=f.selection}deleteCharacters([n,r]){if(n===r||!r)return;const{value:t}=this,s=this.getMaskExpression({value:t.slice(0,n)+t.slice(r),selection:[n,n]}),o={value:t,selection:[n,r]},i=Ie(o,s),[a,c]=i.selection,u=re({value:i.value.slice(0,a)+i.value.slice(c),selection:[a,a]},s,o);this.value=u.value,this.selection=u.selection}getMaskExpression(n){const{mask:r}=this.maskOptions;return"function"==typeof r?r(n):r}}class dt{constructor(n){this.element=n,this.listeners=[]}listen(n,r,t){const s=r;this.element.addEventListener(n,s,t),this.listeners.push(()=>this.element.removeEventListener(n,s))}destroy(){this.listeners.forEach(n=>n())}}const I_CTRL=1,I_ALT=2,I_SHIFT=4,I_META=8;function z(e,n,r){return e.ctrlKey===!!(n&I_CTRL)&&e.altKey===!!(n&I_ALT)&&e.shiftKey===!!(n&I_SHIFT)&&e.metaKey===!!(n&I_META)&&e.keyCode===r}function Y(e,n){var r;const t=e.value;if("string"==typeof n)e.value=n;else{const[s,o]=n.selection;e.value=n.value,e.matches(":focus")&&(null===(r=e.setSelectionRange)||void 0===r||r.call(e,s,o))}e.value!==t&&e.dispatchEvent(new Event("input",{bubbles:!0}))}function ft({value:e,selection:n},r){const[t,s]=n;if(t!==s)return[t,s];const o=r?e.slice(t).indexOf("\n")+1||e.length:e.slice(0,s).lastIndexOf("\n")+1;return[r?t:o,r?o:s]}function pt({value:e,selection:n},r){const[t,s]=n;return t!==s?[t,s]:(r?[t,s+1]:[t-1,s]).map(i=>Math.min(Math.max(i,0),e.length))}const mt=/\s+$/g,vt=/^\s+/g,Te=/\s/;function Et({value:e,selection:n},r){const[t,s]=n;if(t!==s)return[t,s];if(r){const c=e.slice(t),[l]=c.match(vt)||[""],u=c.trimStart().search(Te);return[t,-1!==u?t+l.length+u:e.length]}const o=e.slice(0,s),[i]=o.match(mt)||[""],a=o.trimEnd().split("").reverse().findIndex(c=>c.match(Te));return[-1!==a?s-i.length-a:0,s]}function oe(e=[]){return(n,...r)=>e.reduce((t,s)=>Object.assign(Object.assign({},t),s(t,...r)),n)}function W(e,n){const r=Object.assign(Object.assign({},V),n),t=oe(r.preprocessors),s=oe(r.postprocessors),o="string"==typeof e?{value:e,selection:[0,0]}:e,{elementState:i}=t({elementState:o,data:""},"validation"),a=new ve(i,r),{value:c,selection:l}=s(a,o);return"string"==typeof e?c:{value:c,selection:l}}class _t extends me{constructor(n,r){super(),this.element=n,this.maskitoOptions=r,this.isTextArea="TEXTAREA"===this.element.nodeName,this.eventListener=new dt(this.element),this.options=Object.assign(Object.assign({},V),this.maskitoOptions),this.preprocessor=oe(this.options.preprocessors),this.postprocessor=oe(this.options.postprocessors),this.teardowns=this.options.plugins.map(t=>t(this.element,this.options)),this.updateHistory(this.elementState),this.eventListener.listen("keydown",t=>function gt(e){return z(e,I_CTRL,89)||z(e,I_CTRL|I_SHIFT,90)||z(e,I_META|I_SHIFT,90)}(t)?(t.preventDefault(),this.redo()):function ht(e){return z(e,I_CTRL,90)||z(e,I_META,90)}(t)?(t.preventDefault(),this.undo()):void 0),this.eventListener.listen("beforeinput",t=>{var s;const o=t.inputType.includes("Forward");switch(this.updateHistory(this.elementState),t.inputType){case"historyUndo":return t.preventDefault(),this.undo();case"historyRedo":return t.preventDefault(),this.redo();case"deleteByCut":case"deleteContentBackward":case"deleteContentForward":return this.handleDelete({event:t,isForward:o,selection:pt(this.elementState,o)});case"deleteWordForward":case"deleteWordBackward":return this.handleDelete({event:t,isForward:o,selection:Et(this.elementState,o),force:!0});case"deleteSoftLineBackward":case"deleteSoftLineForward":case"deleteHardLineBackward":case"deleteHardLineForward":return this.handleDelete({event:t,isForward:o,selection:ft(this.elementState,o),force:!0});case"insertCompositionText":case"insertReplacementText":return;case"insertLineBreak":case"insertParagraph":return this.handleEnter(t);default:return this.handleInsert(t,t.data||(null===(s=t.dataTransfer)||void 0===s?void 0:s.getData("text/plain"))||"")}}),this.eventListener.listen("input",({inputType:t})=>{"insertCompositionText"!==t&&(this.ensureValueFitsMask(),this.updateHistory(this.elementState))}),this.eventListener.listen("compositionend",()=>{this.ensureValueFitsMask(),this.updateHistory(this.elementState)})}get elementState(){const{value:n,selectionStart:r,selectionEnd:t}=this.element;return{value:n,selection:[r||0,t||0]}}get maxLength(){const{maxLength:n}=this.element;return-1===n?1/0:n}destroy(){this.eventListener.destroy(),this.teardowns.forEach(n=>null==n?void 0:n())}updateElementState({value:n,selection:r},t={inputType:"insertText",data:null}){const s=this.elementState.value;this.updateValue(n),this.updateSelectionRange(r),s!==n&&this.dispatchInputEvent(t)}updateSelectionRange([n,r]){var t;const{element:s}=this;s.matches(":focus")&&(s.selectionStart!==n||s.selectionEnd!==r)&&(null===(t=s.setSelectionRange)||void 0===t||t.call(s,n,r))}updateValue(n){this.element.value=n}ensureValueFitsMask(){this.updateElementState(W(this.elementState,this.options))}dispatchInputEvent(n={inputType:"insertText",data:null}){globalThis.InputEvent&&this.element.dispatchEvent(new InputEvent("input",Object.assign(Object.assign({},n),{bubbles:!0,cancelable:!1})))}handleDelete({event:n,selection:r,isForward:t,force:s=!1}){const o={value:this.elementState.value,selection:r},[i,a]=o.selection,{elementState:c}=this.preprocessor({elementState:o,data:""},t?"deleteForward":"deleteBackward"),l=new ve(c,this.options),[u,d]=c.selection;l.deleteCharacters([u,d]);const g=this.postprocessor(l,o);if(o.value.slice(0,i)+o.value.slice(a)!==g.value||s||this.element.isContentEditable){if(n.preventDefault(),function ct(e,...n){return n.every(({value:r})=>r===e.value)}(o,c,l,g))return this.updateSelectionRange(t?[d,d]:[u,u]);this.updateElementState(g,{inputType:n.inputType,data:null}),this.updateHistory(g)}}handleInsert(n,r){const t=this.elementState,{elementState:s,data:o=r}=this.preprocessor({data:r,elementState:t},"insert"),i=new ve(s,this.options);try{i.addCharacters(s.selection,o)}catch{return n.preventDefault()}const[a,c]=s.selection,l=t.value.slice(0,a)+r+t.value.slice(c),u=this.postprocessor(i,t);if(u.value.length>this.maxLength)return n.preventDefault();(l!==u.value||this.element.isContentEditable)&&(n.preventDefault(),this.updateElementState(u,{data:r,inputType:n.inputType}),this.updateHistory(u))}handleEnter(n){(this.isTextArea||this.element.isContentEditable)&&this.handleInsert(n,"\n")}}let St=(()=>{var e;class n{constructor(){this.elementRef=(0,h.WQX)(h.aKT).nativeElement,this.ngZone=(0,h.WQX)(h.SKi),this.maskedElement=null,this.options=null,this.elementPredicate=A;const t=(0,h.WQX)(C.me,{self:!0,optional:!0});if(t){const s=t.writeValue.bind(t);t.writeValue=o=>{s(this.options?W(String(null!=o?o:""),this.options):o)}}}ngOnChanges(){var t=this;return(0,b.A)(function*(){const{elementPredicate:s,options:o,maskedElement:i,elementRef:a,ngZone:c}=t;if(null==i||i.destroy(),!o)return;const l=yield s(a);t.elementPredicate===s&&c.runOutsideAngular(()=>{t.maskedElement=new _t(l,o)})})()}ngOnDestroy(){var t;null===(t=this.maskedElement)||void 0===t||t.destroy()}}return(e=n).\u0275fac=function(t){return new(t||e)},e.\u0275dir=h.FsC({type:e,selectors:[["","maskito",""]],inputs:{options:[0,"maskito","options"],elementPredicate:[0,"maskitoElement","elementPredicate"]},standalone:!0,features:[h.OA$]}),n})();function $(e,n,r){const t=Math.min(Number(r),Math.max(Number(n),Number(e)));return e instanceof Date?new Date(t):t}const At=[".",",","\u0431","\u044e"],le="\u2013",Se="\u2014",ee="-",ue="\u2212",De="\u30fc",Be=/[\\^$.*+?()[\]{}|]/g,xt=new RegExp(Be.source);function y(e){return e&&xt.test(e)?e.replaceAll(Be,String.raw`\$&`):e}function T(e,{prefix:n,postfix:r}){var t,s;const o=new RegExp(`^${y(n)}`),i=new RegExp(`${y(r)}$`),[a=""]=null!==(t=e.match(o))&&void 0!==t?t:[],[c=""]=null!==(s=e.match(i))&&void 0!==s?s:[];return{extractedPrefix:a,extractedPostfix:c,cleanValue:e.replace(o,"").replace(i,"")}}function K(e){return e}function We(e){return e.replaceAll(/[\uff10-\uff19]/g,n=>String.fromCharCode(n.charCodeAt(0)-65248))}function Rt(e){const n=new RegExp(`${y(e)}$`);return e?({value:r,selection:t},s)=>{if(!r&&!s.value.endsWith(e))return{value:r,selection:t};if(!r.endsWith(e)&&!s.value.endsWith(e))return{selection:t,value:r+e};const o=s.value.replace(n,""),i=s.selection[1]>=o.length,a=function Ct(e,n){let r="";for(let t=0;t<e.length;t++){if(e[t]!==n[t])return r;r+=e[t]}return r}(o,r);return{selection:t,value:Array.from(e).reverse().reduce((c,l,u)=>{const d=c.length-1-u;return c[d]!==l||a[d]===l&&i?c.slice(0,d+1)+l+c.slice(d+1):c},r)}}:K}function kt(e){return e?({value:n,selection:r},t)=>{if(n.startsWith(e)||!n&&!t.value.startsWith(e))return{value:n,selection:r};const[s,o]=r,i=Array.from(e).reduce((c,l,u)=>c[u]===l?c:c.slice(0,u)+l+c.slice(u),n),a=i.length-n.length;return{selection:[s+a,o+a],value:i}}:K}function B(e,n,r){return(t,s)=>{const o=()=>n(t,s);return t.addEventListener(e,o,r),()=>t.removeEventListener(e,o,r)}}function Zt({prefix:e,postfix:n}){return({elementState:r,data:t})=>{const{cleanValue:s}=T(t,{prefix:e,postfix:n});return{elementState:r,data:s}}}function qe({decimalSeparator:e,isNegativeAllowed:n,precision:r,thousandSeparator:t,prefix:s,postfix:o,decimalPseudoSeparators:i=[],pseudoMinuses:a=[],minusSign:c}){const l=et(s),u=String.raw`\d`,d=n?`[${c}${a.map(v=>`\\${v}`).join("")}]?`:"",g=t?`[${u}${y(t).replaceAll(/\s/g,String.raw`\s`)}]*`:`[${u}]*`,f=r>0?`([${y(e)}${i.map(y).join("")}]${u}{0,${Number.isFinite(r)?r:""}})?`:"",p=et(o);return new RegExp(`^${l}${d}${g}${f}${p}$`)}function et(e){return e?`${e.split("").map(n=>`${y(n)}?`).join("")}`:""}function Oe(e,n="."){const r=!!e.match(new RegExp(`^\\D*[${ue}\\${ee}${le}${Se}${De}]`)),t=y(n),s=e.replaceAll(new RegExp(`${t}(?!\\d)`,"g"),"").replaceAll(new RegExp(`[^\\d${t}]`,"g"),"").replace(n,".");return s?Number((r?ee:"")+s):NaN}function tt(e,{decimalSeparator:n,thousandSeparator:r}){const[t="",s=""]=e.split(n),[,o="",i=""]=t.match(new RegExp(`([^\\d${y(r)}]+)?(.*)`))||[];return{minus:o,integerPart:i,decimalPart:s}}function qt({decimalSeparator:e,precision:n,decimalZeroPadding:r,prefix:t,postfix:s}){return n<=0||!r?K:({value:o,selection:i})=>{const{cleanValue:a,extractedPrefix:c,extractedPostfix:l}=T(o,{prefix:t,postfix:s});if(Number.isNaN(Oe(a,e)))return{value:o,selection:i};const[u,d=""]=a.split(e);return{value:c+u+e+d.padEnd(n,"0")+l,selection:i}}}function en({prefix:e,postfix:n,decimalSeparator:r,thousandSeparator:t}){return({value:s,selection:o})=>{const[i]=o,{cleanValue:a,extractedPrefix:c,extractedPostfix:l}=T(s,{prefix:e,postfix:n}),{minus:u,integerPart:d,decimalPart:g}=tt(a,{decimalSeparator:r,thousandSeparator:t}),f=!d&&!g&&a.includes(r);return!d&&!Number(g)&&i===(u+c).length||f?{selection:o,value:c+u+l}:{value:s,selection:o}}}function tn({decimalSeparator:e,decimalPseudoSeparators:n,pseudoMinuses:r,prefix:t,postfix:s,minusSign:o}){let i=!0;const a=qe({decimalSeparator:e,decimalPseudoSeparators:n,pseudoMinuses:r,prefix:"",postfix:"",thousandSeparator:"",precision:1/0,isNegativeAllowed:!0,minusSign:o});return({elementState:c,data:l})=>{if(!i)return{elementState:c,data:l};i=!1;const{value:u,selection:d}=c,[g,f]=d,{extractedPrefix:p,cleanValue:v,extractedPostfix:m}=T(u,{prefix:t,postfix:s}),P=W({selection:[Math.max(g-p.length,0),$(f-p.length,0,v.length)],value:v},{mask:a}),[D,M]=P.selection;return{elementState:{selection:[D+p.length,M+p.length],value:p+P.value+m},data:l}}}function sn({min:e,max:n,decimalSeparator:r,minusSign:t}){return({value:s,selection:o})=>{const i=Oe(s,r),a=i>0?Math.min(i,n):Math.max(i,e);if(i&&a!==i){const c=`${a}`.replace(".",r).replace(ee,t);return{value:c,selection:[c.length,c.length]}}return{value:s,selection:o}}}function rn({decimalSeparator:e,thousandSeparator:n,decimalZeroPadding:r}){return({elementState:t,data:s},o)=>{const{value:i,selection:a}=t,[c,l]=a,u=i.slice(c,l),d=r?[e,n]:[n],g=r&&c>i.indexOf(e)&&!!u.match(/^0+$/gi);return"deleteBackward"!==o&&"deleteForward"!==o||!d.includes(u)&&!g?{elementState:t,data:s}:{elementState:{value:i,selection:"deleteForward"===o?[l,l]:[c,c]},data:s}}}function on({decimalSeparator:e,precision:n,prefix:r,postfix:t}){const s=new RegExp(`^\\D*${y(e)}`);return({elementState:o,data:i})=>{const{value:a,selection:c}=o,{cleanValue:l,extractedPrefix:u}=T(a,{prefix:r,postfix:t}),[d,g]=c,f=$(d-u.length,0,l.length),p=$(g-u.length,0,l.length);return n<=0||l.slice(0,f).includes(e)||l.slice(p).includes(e)||!i.match(s)?{elementState:o,data:i}:{elementState:o,data:l.slice(0,f).match(/\d+/)?i:`0${i}`}}}function nt({validCharacter:e,pseudoCharacters:n,prefix:r,postfix:t}){const s=new RegExp(`[${n.join("")}]`,"gi");return({elementState:o,data:i})=>{const{value:a,selection:c}=o,{cleanValue:l,extractedPostfix:u,extractedPrefix:d}=T(a,{prefix:r,postfix:t});return{elementState:{selection:c,value:d+l.replace(s,e)+u},data:i.replace(s,e)}}}function cn({decimalSeparator:e,prefix:n,postfix:r}){return({elementState:t,data:s})=>{const{value:o,selection:i}=t,[a,c]=i,{cleanValue:l}=T(o,{prefix:n,postfix:r});return{elementState:t,data:!l.includes(e)||o.slice(a,c+1).includes(e)?s:s.replaceAll(new RegExp(y(e),"gi"),"")}}}function an({thousandSeparator:e,decimalSeparator:n,prefix:r,postfix:t}){return e?({value:o,selection:i})=>{const{cleanValue:a,extractedPostfix:c,extractedPrefix:l}=T(o,{prefix:r,postfix:t}),{minus:u,integerPart:d,decimalPart:g}=tt(a,{decimalSeparator:n,thousandSeparator:e}),[f,p]=i;let[v,m]=i;const P=Array.from(d).reduceRight((D,M,R)=>{const H=!(!R&&M===e)&&D.length&&(D.length+1)%4==0;return H&&(M===e||((...o)=>o.every(i=>/\s/.test(i)))(M,e))?e+D:M!==e||H?H?(R<=f&&v++,R<=p&&m++,M+e+D):M+D:(R&&R<=f&&v--,R&&R<=p&&m--,D)},"");return{value:l+u+P+(a.includes(n)?n:"")+g+c,selection:[v,m]}}:K}function ln({precision:e,decimalSeparator:n,prefix:r,postfix:t}){if(e>0)return K;const s=new RegExp(`${y(n)}.*$`,"g");return({elementState:o,data:i})=>{const{value:a,selection:c}=o,{cleanValue:l,extractedPrefix:u,extractedPostfix:d}=T(a,{prefix:r,postfix:t}),[g,f]=c,p=u+l.replace(s,"")+d;return{elementState:{selection:[Math.min(g,p.length),Math.min(f,p.length)],value:p},data:i.replace(s,"")}}}new RegExp(`[${[":","."].map(y).join("")}]$`);const st=[0,0];function un({decimalSeparator:e,thousandSeparator:n,prefix:r,postfix:t}){const s=function nn({decimalSeparator:e,thousandSeparator:n,prefix:r,postfix:t}){const s=i=>{const a=y(n);return i.replace(new RegExp(`^(\\D+)?[0${a}]+(?=0)`),"$1").replace(new RegExp(`^(\\D+)?[0${a}]+(?=[1-9])`),"$1")},o=(i,a)=>{const c=i.slice(0,a),l=i.slice(a).startsWith("0");return c.length-s(c).length+(l?1:0)};return({value:i,selection:a})=>{const[c,l]=a,{cleanValue:u,extractedPrefix:d,extractedPostfix:g}=T(i,{prefix:r,postfix:t}),f=u.includes(e),[p="",v=""]=u.split(e),m=s(p);if(p===m)return{value:i,selection:a};const P=c-o(i,c),D=l-o(i,l);return{value:d+m+(f?e:"")+v+g,selection:[Math.max(P,0),Math.max(D,0)]}}}({decimalSeparator:e,thousandSeparator:n,prefix:r,postfix:t});return B("blur",o=>{Y(o,s({value:o.value,selection:st},{value:"",selection:st}).value)},{capture:!0})}function dn({min:e,max:n,decimalSeparator:r}){return B("blur",(t,s)=>{const o=Oe(t.value,r),i=$(o,e,n);!Number.isNaN(o)&&o!==i&&Y(t,W(function Qt(e){const n=String(e),[r="",t]=n.split("e-");let s=n;if(t){const[,o]=r.split("."),i=Number(t)+((null==o?void 0:o.length)||0);s=e.toFixed(i)}return s}(i),s))},{capture:!0})}function gn({decimalSeparator:e,prefix:n,postfix:r}){return B("blur",t=>{const{cleanValue:s,extractedPostfix:o,extractedPrefix:i}=T(t.value,{prefix:n,postfix:r});Y(t,i+s.replace(new RegExp(`^(\\D+)?${y(e)}`),`$10${e}`)+o)},{capture:!0})}var pn=E(6828),rt=E(3207),ot=E(9684);let mn=(()=>{var e;class n{constructor(t){this.baseApiService=t,this.patchApi="api/IdentificacaoFuncionario"}getImage(t){var s=this;return(0,b.A)(function*(){const o=yield(0,rt.s)(s.baseApiService.get(`${s.patchApi}/GetImageFunc/${t}`,void 0,"blob"));return o?URL.createObjectURL(o):null})()}}return(e=n).\u0275fac=function(t){return new(t||e)(h.KVO(ot.v))},e.\u0275prov=h.jDH({token:e,factory:e.\u0275fac,providedIn:"root"}),n})(),vn=(()=>{var e;class n{constructor(t){this.baseApiService=t,this.patchApi="api/PedidoRefeicao"}saveItemValor(t){var s=this;return(0,b.A)(function*(){try{return yield(0,rt.s)(s.baseApiService.post(`${s.patchApi}/SaveItemValor`,t))}catch(o){throw console.error(o),o}})()}}return(e=n).\u0275fac=function(t){return new(t||e)(h.KVO(ot.v))},e.\u0275prov=h.jDH({token:e,factory:e.\u0275fac,providedIn:"root"}),n})();function En(e,n){1&e&&h.nrm(0,"ion-spinner")}function _n(e,n){if(1&e){const r=h.RV6();h.qex(0),h.j41(1,"div",9),h.nrm(2,"ion-img",10),h.k0s(),h.j41(3,"div",11)(4,"h3"),h.EFF(5),h.nI1(6,"uppercase"),h.k0s()(),h.j41(7,"ion-row")(8,"ion-col",12)(9,"ion-input",13),h.mxI("ngModelChange",function(s){h.eBV(r);const o=h.XpG();return h.DH7(o.inputValor,s)||(o.inputValor=s),h.Njj(s)}),h.k0s()()(),h.j41(10,"ion-button",14),h.bIt("click",function(){h.eBV(r);const s=h.XpG();return h.Njj(s.sendValue())}),h.EFF(11,"CONFIRMAR"),h.nrm(12,"ion-icon",15),h.k0s(),h.bVm()}if(2&e){const r=h.XpG();h.R7$(2),h.Y8G("src",r.imageFuncUrl),h.R7$(3),h.JRh(h.bMT(6,7,null==r.qrCodeDataObj?null:r.qrCodeDataObj.func_nome)),h.R7$(4),h.Y8G("inputMode","number")("maskito",r.phoneMask)("maskitoElement",r.maskPredicate),h.R50("ngModel",r.inputValor),h.R7$(),h.Y8G("disabled",!r.inputValor||"R$ "===r.inputValor)}}let Sn=(()=>{var e;class n{constructor(t,s,o,i,a,c){this.loaddingCtrl=t,this.alertCtrl=s,this.router=o,this.sessionStorageService=i,this.identFuncSrv=a,this.pedidoRefeicaoSrv=c,this.readQrcode=!1,this.imageLoaded=!1,this.phoneMask=function hn({max:e=Number.MAX_SAFE_INTEGER,min:n=Number.MIN_SAFE_INTEGER,precision:r=0,thousandSeparator:t="\xa0",decimalSeparator:s=".",decimalPseudoSeparators:o,decimalZeroPadding:i=!1,prefix:a="",postfix:c="",minusSign:l=ue}={}){const u=[ee,le,Se,De,ue].filter(f=>f!==t&&f!==s&&f!==l),d=function Jt({decimalSeparator:e,thousandSeparator:n,decimalPseudoSeparators:r=At}){return r.filter(t=>t!==n&&t!==e)}({decimalSeparator:s,thousandSeparator:t,decimalPseudoSeparators:o}),g=a.endsWith(s)&&r>0?`${a}\u200b`:a;return Object.assign(Object.assign({},V),{mask:qe({decimalSeparator:s,precision:r,thousandSeparator:t,prefix:g,postfix:c,isNegativeAllowed:n<0,minusSign:l}),preprocessors:[({elementState:e,data:n})=>{const{value:r,selection:t}=e;return{elementState:{selection:t,value:We(r)},data:We(n)}},tn({decimalSeparator:s,decimalPseudoSeparators:d,pseudoMinuses:u,prefix:g,postfix:c,minusSign:l}),Zt({prefix:g,postfix:c}),nt({validCharacter:l,pseudoCharacters:u,prefix:g,postfix:c}),nt({validCharacter:s,pseudoCharacters:d,prefix:g,postfix:c}),on({decimalSeparator:s,precision:r,prefix:g,postfix:c}),rn({decimalSeparator:s,decimalZeroPadding:i,thousandSeparator:t}),ln({precision:r,decimalSeparator:s,prefix:g,postfix:c}),cn({decimalSeparator:s,prefix:g,postfix:c})],postprocessors:[sn({decimalSeparator:s,min:n,max:e,minusSign:l}),kt(g),Rt(c),an({decimalSeparator:s,thousandSeparator:t,prefix:g,postfix:c}),qt({decimalSeparator:s,decimalZeroPadding:i,precision:r,prefix:g,postfix:c}),en({prefix:g,postfix:c,decimalSeparator:s,thousandSeparator:t})],plugins:[un({decimalSeparator:s,thousandSeparator:t,prefix:g,postfix:c}),gn({decimalSeparator:s,prefix:g,postfix:c}),dn({min:n,max:e,decimalSeparator:s})],overwriteMode:i?({value:f,selection:[p]})=>p<=f.indexOf(s)?"shift":"replace":"shift"})}({precision:2,decimalSeparator:",",min:0,prefix:"R$ ",thousandSeparator:"."}),this.maskPredicate=function(){var l=(0,b.A)(function*(u){return u.getInputElement()});return function(u){return l.apply(this,arguments)}}()}ngOnInit(){var t=this;return(0,b.A)(function*(){var s;yield(0,O.h)(t.loaddingCtrl,t.alertCtrl,{mainAction:(s=(0,b.A)(function*(){yield t.validarQrCodeData(),t.imageFuncUrl=yield t.getImageFuncionario(),t.loadImage()}),function(){return s.apply(this,arguments)}),onError:s=>{console.error(s),t.closeRegister()},onClickButtonDialogError:()=>{t.closeRegister()}})})()}msgCloseForm(){var t=this;return(0,b.A)(function*(){var o;yield(yield t.alertCtrl.create({header:"Sair do cadastro de Valor",message:"Voc\xea tem certeza que quer sair do cadastro do Valor do pedido? Ao sair, ser\xe1 necessario ler o QR Code novamente!",buttons:[{text:"Continuar nesta Tela",role:"cancel"},{text:"Sair",role:"",handler:(o=(0,b.A)(function*(){return t.closeRegister()}),function(){return o.apply(this,arguments)})}]})).present()})()}msgSendForm(){var t=this;return(0,b.A)(function*(){yield(yield t.alertCtrl.create({header:"Enviar Valor",message:"Ap\xf3s confirmar, n\xe3o \xe9 permitido reverter essa a\xe7\xe3o!",buttons:[{text:"Sair",role:"cancel"},{text:"Confirmar",role:"",handler:()=>t.sendValue()}]})).present()})()}closeRegister(){this.inputValor="",this.sessionStorageService.removeItem(k.p.QRCODEDATA),this.router.navigate(["/qrcode-reader"])}sendValue(){var t=this;return(0,b.A)(function*(){var s;yield(0,O.h)(t.loaddingCtrl,t.alertCtrl,{mainAction:(s=(0,b.A)(function*(){const o=t.qrCodeDataObj,i={pedidoRefeicao:{id:o.ped_ref_id},itemPedidoRefeicao:{id:o.item_ped_ref_id},valor:t.brlStringToNumber(t.inputValor),lancamento:(new Date).toISOString().split("T")[0]};yield t.pedidoRefeicaoSrv.saveItemValor(i),yield t.successSendValue(),t.closeRegister()}),function(){return s.apply(this,arguments)}),onError:s=>{console.error(s),t.closeRegister()}})})()}validarQrCodeData(){var t=this;return(0,b.A)(function*(){let s=t.sessionStorageService.getItem(k.p.QRCODEDATA);if(s&&(t.qrCodeDataObj=JSON.parse(s),!t.qrCodeDataObj))throw new Error("Error ao ler dados do Qr Code salvos, tente novamente")})()}brlStringToNumber(t){const s=t.replace(/[^0-9,]/g,"").replace(",","."),o=parseFloat(s);return isNaN(o)?0:o}successSendValue(t){var s=this;return(0,b.A)(function*(){let o;o=t?`Valor a ser enviado: ${JSON.stringify(t)}`:"Valor cadastrado no pedido com sucesso!",yield(yield s.alertCtrl.create({header:"SUCESSO",message:o,buttons:[{text:"Ok",handler:()=>{s.closeRegister()}}]})).present()})()}getImageFuncionario(){var t=this;return(0,b.A)(function*(){try{return yield t.identFuncSrv.getImage(t.qrCodeDataObj.func_id)}catch{throw new Error("Foto do funcion\xe1rio n\xe3o encontrada. Verifique o cadastro do funcion\xe1rio no Marmitech.")}})()}loadImage(){const t=new Image;t.src=this.imageFuncUrl,t.onload=()=>{this.imageLoaded=!0}}ngOnDestroy(){this.imageLoaded=!1,this.closeRegister()}}return(e=n).\u0275fac=function(t){return new(t||e)(h.rXU(_.Xi),h.rXU(_.hG),h.rXU(F.Ix),h.rXU(pn.R),h.rXU(mn),h.rXU(vn))},e.\u0275cmp=h.VBU({type:e,selectors:[["app-form"]],standalone:!0,features:[h.aNF],decls:18,vars:4,consts:[[3,"translucent"],["slot","end"],[3,"click"],[3,"fullscreen"],["collapse","condense"],["size","large"],[1,"ion-justify-content-center"],["size-md","6","size-lg","4","size-xl","3"],[4,"ngIf"],[1,"image-container"],[1,"full-img",3,"src"],[1,"ion-text-center"],["size","12"],["fill","outline","placeholder","R$ 0,00",3,"ngModelChange","inputMode","maskito","maskitoElement","ngModel"],["expand","block","fill","solid","color","primary",3,"click","disabled"],["slot","start","name","value"]],template:function(t,s){1&t&&(h.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),h.EFF(3,"Informar valor refei\xe7\xe3o"),h.k0s(),h.j41(4,"ion-buttons",1)(5,"ion-button",2),h.bIt("click",function(){return s.msgCloseForm()}),h.EFF(6," Fechar "),h.k0s()()()(),h.j41(7,"ion-content",3)(8,"ion-header",4)(9,"ion-toolbar")(10,"ion-title",5),h.EFF(11,"Informar valor refei\xe7\xe3o"),h.k0s()()(),h.j41(12,"div")(13,"ion-grid")(14,"ion-row",6)(15,"ion-col",7),h.DNE(16,En,1,0,"ion-spinner",8)(17,_n,13,9,"ng-container",8),h.k0s()()()()()),2&t&&(h.Y8G("translucent",!0),h.R7$(7),h.Y8G("fullscreen",!0),h.R7$(9),h.Y8G("ngIf",!s.imageLoaded),h.R7$(),h.Y8G("ngIf",s.imageLoaded))},dependencies:[St,_.bv,_.Jm,_.QW,_.hU,_.W9,_.lO,_.eU,_.iq,_.KW,_.$w,_.ln,_.w2,_.BC,_.ai,_.Gw,L.MD,L.bT,L.Pc,C.YN,C.BC,C.vS,F.iI,x.gq,C.X1],styles:['@charset "UTF-8";[_nghost-%COMP%]   ion-title.title-large[_ngcontent-%COMP%]{font-size:1.5em}[_nghost-%COMP%]   .image-container[_ngcontent-%COMP%]{width:250px;height:300px;box-shadow:0 4px 8px #0003;display:flex;justify-content:center;align-items:center;background-color:#fff;margin:0 auto;border-radius:15px;overflow:hidden}[_nghost-%COMP%]   ion-img[_ngcontent-%COMP%]::part(image){border-radius:15px;object-fit:cover}[_nghost-%COMP%]   .full-img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;object-position:top}[_nghost-%COMP%]   ion-radio-group[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{margin-bottom:8px}[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%]{position:relative}[_nghost-%COMP%]   .scan[_ngcontent-%COMP%]{position:absolute;top:var(--offset-top, 56px);bottom:var(--offset-bottom, 0px);left:0;right:0}[_nghost-%COMP%]   ion-input[_ngcontent-%COMP%]{min-height:42px;--padding-end: 8px;--padding-start: 8px;border:1px solid #4e5c5c;border-radius:10px;background-color:#f4f5f8;color:#111;--placeholder-color: #111111}']}),n})()},9684:(fe,N,E)=>{E.d(N,{v:()=>h});var b=E(467),L=E(4412),C=E(9437),F=E(8810),_=E(1109),x=E(3953),k=E(1626),O=E(654);let h=(()=>{var w;class ne{constructor(S,A){this.http=S,this.ionStorageSrv=A,this.baseUrl=new L.t(""),this.inicialize()}inicialize(){var S=this;return(0,b.A)(function*(){(yield S.getBaseUrlFromStorage())||S.setBaseUrl("http://179.190.96.46:157")})()}getBaseUrlFromStorage(){var S=this;return(0,b.A)(function*(){return yield S.ionStorageSrv.get(_.p.BASEAPI)})()}get baseUrl$(){return this.baseUrl.asObservable()}setBaseUrl(S){this.baseUrl.next(S),this.ionStorageSrv.set(_.p.BASEAPI,S)}get(S,A,V="json"){return this.http.get(`${this.baseUrl.value}/${S}`,{params:A||void 0,responseType:V}).pipe((0,C.W)(this.handleError))}post(S,A){return this.http.post(`${this.baseUrl.value}/${S}`,A).pipe((0,C.W)(this.handleError))}put(S,A){return this.http.put(`${this.baseUrl.value}/${S}`,A).pipe((0,C.W)(this.handleError))}delete(S){return this.http.delete(`${this.baseUrl.value}/${S}`).pipe((0,C.W)(this.handleError))}handleError(S){let A="";if(S.error instanceof ErrorEvent)A=`Erro: ${S.error.message}`;else switch(S.status){case 400:A="Requisi\xe7\xe3o inv\xe1lida.";break;case 401:A="N\xe3o autorizado.";break;case 403:A="Acesso proibido.";break;case 404:A="Recurso n\xe3o encontrado.";break;case 500:A="Erro interno do servidor.";break;default:A="Ocorreu um erro desconhecido."}return console.error(A),(0,F.$)(()=>new Error(A))}}return(w=ne).\u0275fac=function(S){return new(S||w)(x.KVO(k.Qq),x.KVO(O.X))},w.\u0275prov=x.jDH({token:w,factory:w.\u0275fac,providedIn:"root"}),ne})()},8313:(fe,N,E)=>{E.d(N,{h:()=>L});var b=E(467);function L(F,_,x){return C.apply(this,arguments)}function C(){return(C=(0,b.A)(function*(F,_,x){const k=yield F.create({message:"Aguarde..."});yield k.present();try{yield x.mainAction(),yield k.dismiss(),x.onAfterTryDismiss&&x.onAfterTryDismiss()}catch(O){console.error(O),x.onError&&x.onError(O),yield k.dismiss(),yield(yield _.create({header:"Erro!",message:O.message?null==O?void 0:O.message:"Erro desconhecido, tente novamente",buttons:[{text:"Ok",handler:()=>{x.onClickButtonDialogError&&x.onClickButtonDialogError()}}]})).present()}})).apply(this,arguments)}},3207:(fe,N,E)=>{E.d(N,{s:()=>L});var b=E(9350);function L(C,F){const _="object"==typeof F;return new Promise((x,k)=>{let h,O=!1;C.subscribe({next:w=>{h=w,O=!0},error:k,complete:()=>{O?x(h):_?x(F.defaultValue):k(new b.G)}})})}}}]);